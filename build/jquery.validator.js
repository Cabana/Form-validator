var split;
split=split||function(a){var e=String.prototype.split,d=/()??/.exec("")[1]===a,b;b=function(c,b,f){if("[object RegExp]"!==Object.prototype.toString.call(b))return e.call(c,b,f);var h=[],l=(b.ignoreCase?"i":"")+(b.multiline?"m":"")+(b.extended?"x":"")+(b.sticky?"y":""),k=0;b=RegExp(b.source,l+"g");var n,m,p;c+="";d||(n=RegExp("^"+b.source+"$(?!\\s)",l));for(f=f===a?4294967295:f>>>0;m=b.exec(c);){l=m.index+m[0].length;if(l>k&&(h.push(c.slice(k,m.index)),!d&&1<m.length&&m[0].replace(n,function(){for(var b=1;b<
arguments.length-2;b++)arguments[b]===a&&(m[b]=a)}),1<m.length&&m.index<c.length&&Array.prototype.push.apply(h,m.slice(1)),p=m[0].length,k=l,h.length>=f))break;b.lastIndex===m.index&&b.lastIndex++}k===c.length?(p||!b.test(""))&&h.push(""):h.push(c.slice(k));return h.length>f?h.slice(0,f):h};String.prototype.split=function(c,e){return b(this,c,e)};return b}();
(function(){Array.prototype.clean=function(a){var e;for(e=0;e<this.length;)this[e]===a&&(this.splice(e,1),e--),e++;return this};String.prototype.wrapInBraces=function(){return this.replace(/^/,"{").replace(/$/,"}")};String.prototype.replaceSquareBracketsWithBraces=function(){return this.replace(/\[/g,"{").replace(/\]/g,"}")};String.prototype.removeWhitespace=function(){return this.replace(/\s+/g,"")};this.Parser=function(){function a(e){this.defaults=e}a.prototype.parse=function(e){var a;a={};if(""===
e)return a;e=this._prepareString(e);return this._toJSON(e)};a.prototype.addDefaultValue=function(e,a){this.defaults||(this.defaults={});return this.defaults[e]=a};a.prototype._prepareString=function(e){e=e.removeWhitespace();this.defaults&&(e=this._applyOptionValues(e));e=this._setUndefinedValues(e);return this._wrapWordsInQuotes(e)};a.prototype._applyOptionValues=function(e){var a,b,c,g,f;b="";e=this._splitIntoWords(e);a=g=0;for(f=e.length;g<f;a=++g)c=e[a],a=e[a+1],this.defaults[c]&&":"!==a&&(c+=
":"+this.defaults[c]),b+=c;return b};a.prototype._setUndefinedValues=function(a){var d,b,c,g,f,h;c=this._splitIntoWords(a);d=f=0;for(h=c.length;f<h;d=++f)if(g=c[d],a=c[d+1],b=c[d-1],/\]+/.test(a)&&":"!==b||","===a||void 0===a&&!/\]+/.test(g))c[d]+=":undefined";a=c.join("");d="";g=a.split(/(\[|,|\])/);b=0;for(c=g.length;b<c;b++)a=g[b],/.*:.*:.*/.test(a)&&(a=a.replace(":undefined","")),d+=a;return d};a.prototype._splitIntoWords=function(a){return split(a,/(:\[?|\]+,?|,)/).clean("")};a.prototype._wrapWordsInQuotes=
function(a){var d,b,c,g;d=this._splitIntoWords(a);a=c=0;for(g=d.length;c<g;a=++c)b=d[a],":"===b||/\]+/.test(b)||(":["===b||","===b)||(/^\d+$/.test(b)?d[a]=parseInt(b):d[a]="true"===b?!0:"false"===b?!1:'"'+b+'"');return d.join("")};a.prototype._toJSON=function(a){/\.*:\.*/.test(a)||(a+=':"undefined"');a=a.replaceSquareBracketsWithBraces().wrapInBraces();a=a.replace(/\\/g,"\\\\");return JSON.parse(a)};return a}()}).call(this);
(function(){Object.keys||(Object.keys=function(a){var e,d;e=[];d=void 0;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&e.push(d);return e});String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};window.toSentence=function(a){switch(a.length){case 0:a="";break;case 1:a=a[0];break;case 2:a=a[0]+" and "+a[1];break;default:a=a.slice(0,-1).join(", ")+", and "+a[a.length-1]}return a}}).call(this);
(function(){this.Errors=function(){function a(){this.errors=[]}a.prototype.add=function(a){var d,b,c,g;if(a){if("string"===typeof a)return this.errors.push(a);g=[];b=0;for(c=a.length;b<c;b++)d=a[b],g.push(this.errors.push(d));return g}};a.prototype.none=function(){return 0===this.errors.length?!0:!1};a.prototype.alwaysReturn=function(a){return this.none=function(){return a}};a.prototype.fullMessages=function(){return toSentence(this.errors).toLowerCase().capitalize()};a.prototype.all=function(){return this.errors};
return a}()}).call(this);
(function(){this.ValidatableInput=function(){function a(a){this.input=a;this.customMessage=this.input.getAttribute("data-custom-error-message")}a.prototype.setupErrorMessage=function(a){return this.input.setAttribute("data-error-message",this.customMessage||a)};a.prototype.resetErrorMessages=function(){return this.input.removeAttribute("data-error-message")};a.prototype.validations=function(){return this.input.getAttribute("data-validation")};a.prototype.asHtmlNode=function(){return this.input};a.prototype.isEmpty=
function(){return"select"===this.input.nodeName.toLowerCase()?this.input.querySelector("option").text===this.input.value||""===this.input.value?!0:!1:/^.+$/.test(this.input.value)?!1:!0};return a}()}).call(this);
(function(){var a=[].indexOf||function(a){for(var d=0,b=this.length;d<b;d++)if(d in this&&this[d]===a)return d;return-1};this.RangeValidation=function(){function e(a,b,c){this.length=a;this.min=b;this.max=c}e.prototype.validate=function(){var d,b,c;if(this.max&&this.min&&(d=this.length,0>a.call(function(){c=[];for(var a=b=this.min,d=this.max;b<=d?a<=d:a>=d;b<=d?a++:a--)c.push(a);return c}.apply(this),d)))return this.mixedMessage();if(this.min&&this.length<this.min)return this.tooShortMessage();if(this.max&&
this.length>this.max)return this.tooLongMessage()};return e}()}).call(this);
(function(){var a,e={}.hasOwnProperty,d=function(a,c){function d(){this.constructor=a}for(var f in c)e.call(c,f)&&(a[f]=c[f]);d.prototype=c.prototype;a.prototype=new d;a.__super__=c.prototype;return a};this.CharacterCountValidation=function(b){function c(){return a=c.__super__.constructor.apply(this,arguments)}d(c,b);c.prototype.mixedMessage=function(){return"Value most be at least "+this.min+" and maximum "+this.max+" characters long"};c.prototype.tooShortMessage=function(){return"Value most be at least "+
this.min};c.prototype.tooLongMessage=function(){return"Value can't be longer than "+this.max};return c}(RangeValidation)}).call(this);
(function(){var a,e={}.hasOwnProperty,d=function(a,c){function d(){this.constructor=a}for(var f in c)e.call(c,f)&&(a[f]=c[f]);d.prototype=c.prototype;a.prototype=new d;a.__super__=c.prototype;return a};this.WordCountValidation=function(b){function c(){return a=c.__super__.constructor.apply(this,arguments)}d(c,b);c.prototype.mixedMessage=function(){return"Can't contain less than "+this.min+" or more than "+this.max+" words"};c.prototype.tooShortMessage=function(){return"Can't contain less than "+this.min+
" words"};c.prototype.tooLongMessage=function(){return"Can't contain more than "+this.max+" words"};return c}(RangeValidation)}).call(this);
(function(){var a,e=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};a={};this.FormValidator=function(){function d(){var a;a=new Parser;a.addDefaultValue("required",!0);a.addDefaultValue("allowEmpty",!0);this.parser=a;this._setupBuiltInValidations()}d.prototype.defineValidation=function(a,c,d){return this._validations[a]={validationHandler:c,errorMessage:d}};d.prototype.validateForm=function(a){var c,d,f,h;c=a.querySelectorAll("[data-validation]");
d=[];f=0;for(h=c.length;f<h;f++)a=c[f],d.push(this.validateInput(a));return 0<=e.call(d,!1)?!1:!0};d.prototype.validateInput=function(b){var c;b=new ValidatableInput(b);c=this._generateValidations(b.validations());a=new Errors;this._performBuiltinValidations(b.asHtmlNode(),c);this._performFormatValidation(b.asHtmlNode(),c.format);b.resetErrorMessages();if(a.none())return!0;b.setupErrorMessage(a.fullMessages());return!1};d.prototype._validations={};d.prototype._performFormatValidation=function(b,c){var d,
e,h,l,k;if(c){l=Object.keys(c);k=[];e=0;for(h=l.length;e<h;e++)d=l[e],this._validations[d].validationHandler.test(b.value)?k.push(void 0):k.push(a.add(this._validations[d].errorMessage));return k}};d.prototype._performBuiltinValidations=function(b,c){var d,e,h,l,k;l=Object.keys(c);k=[];e=0;for(h=l.length;e<h;e++)d=l[e],"format"!==d?(d=this._validations[d].validationHandler(b,c),k.push(a.add(d))):k.push(void 0);return k};d.prototype._setupBuiltInValidations=function(){var a=this;this.defineValidation("email",
/.+@.+\..+/,"Email is invalid");this.defineValidation("tel",/\d{8}/,"Telephone number is invalid");this.defineValidation("number",/^\d+$/,"Invalid");this.defineValidation("required",function(a,b){if((new ValidatableInput(a)).isEmpty())return"Can't be blank";if("checkbox"===a.getAttribute("type")&&!a.checked)return"Most be checked"});this.defineValidation("length",function(a,b){return(new CharacterCountValidation(a.value.length,b.length.min,b.length.max)).validate()});this.defineValidation("wordCount",
function(a,b){var d;d=""===a.value?d=0:a.value.split(/[ ]+/).length;return(new WordCountValidation(d,b.wordCount.min,b.wordCount.max)).validate()});this.defineValidation("allowEmpty",function(c,d){return a._alwaysValidIf(""===c.value)});this.defineValidation("onlyIfChecked",function(c,d){return a._alwaysValidIf(!document.getElementById(d.onlyIfChecked).checked)});return this.defineValidation("onlyIfEmpty",function(c,d){var e;e=document.getElementById(d.onlyIfEmpty);if(!(new ValidatableInput(e)).isEmpty())return a._alwaysValidIf(!0)})};
d.prototype._alwaysValidIf=function(b){if(b)return a.alwaysReturn([])};d.prototype._generateValidations=function(a){return this.parser.parse(a)};return d}()}).call(this);
(function(a,e,d,b){function c(c,d){this.element=c;this.options=a.extend({},f,d);this._defaults=f;this._name=g;this.init()}var g="validate",f={validator:new FormValidator,onBlur:!1,selectorClasses:{field:".field"},errorClasses:{input:"input-with-error",field:"field-with-error",form:"form-with-error"},beforeValidation:function(){},afterValidation:function(){},ifValid:function(){},ifInvalid:function(){}};c.prototype={init:function(){var c=this,b=c.element,e=c.options,f=e.validator,g=!0;b.setAttribute("novalidate",
"true");a(d).on("keydown",function(c){var b;b=13===c.keyCode?!0:void 0;b&&(c=c.target.nodeName.toLowerCase(),b="input"==c||"textarea"==c||"select"==c?!0:!1);b&&a('input[type="submit"]:not([data-skip-validation])').trigger("click")});a("input[data-skip-validation]").hover(function(){g=!1},function(){g=!0}).on("click",function(a){g&&a.preventDefault()});a(b).on("submit",function(d){g&&(e.beforeValidation(),f.validateForm(b)?e.ifValid():(d.preventDefault(),e.ifInvalid()),c.setErrorClasses(b,e),c.setErrorMessages(b,
e),a(".input-with-error").first().focus(),e.afterValidation())});if(e.onBlur)a(b).find("[data-validation]").on("blur",function(a){f.validateInput(this);c.setErrorClasses(b,e);c.setErrorMessages(b,e)})},setErrorClasses:function(c,b){a("."+b.errorClasses.input).removeClass(b.errorClasses.input);a("."+b.errorClasses.field).removeClass(b.errorClasses.field);a("."+b.errorClasses.form).removeClass(b.errorClasses.form);a(c).find("[data-error-message]").each(function(){var d=a(this),e=d.parents(b.selectorClasses.field),
f=a(c);d.addClass(b.errorClasses.input);e.addClass(b.errorClasses.field);f.addClass(b.errorClasses.form)})},setErrorMessages:function(b,c){a(b).find("small.error-message").remove();a(b).find("[data-error-message]").each(function(){var b=this.dataset.errorMessage;a(this).after('<small class="error-message">'+b+"</small>")})}};a.fn[g]=function(b){return this.each(function(){a.data(this,"plugin_"+g)||a.data(this,"plugin_"+g,new c(this,b))})}})(jQuery,window,document);
