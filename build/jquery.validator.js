var split;
split=split||function(a){var b=String.prototype.split,e=/()??/.exec("")[1]===a,d;d=function(c,d,f){if("[object RegExp]"!==Object.prototype.toString.call(d))return b.call(c,d,f);var h=[],k=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),m=0;d=RegExp(d.source,k+"g");var p,l,n;c+="";e||(p=RegExp("^"+d.source+"$(?!\\s)",k));for(f=f===a?4294967295:f>>>0;l=d.exec(c);){k=l.index+l[0].length;if(k>m&&(h.push(c.slice(m,l.index)),!e&&1<l.length&&l[0].replace(p,function(){for(var b=1;b<
arguments.length-2;b++)arguments[b]===a&&(l[b]=a)}),1<l.length&&l.index<c.length&&Array.prototype.push.apply(h,l.slice(1)),n=l[0].length,m=k,h.length>=f))break;d.lastIndex===l.index&&d.lastIndex++}m===c.length?(n||!d.test(""))&&h.push(""):h.push(c.slice(m));return h.length>f?h.slice(0,f):h};String.prototype.split=function(b,e){return d(this,b,e)};return d}();
(function(){Array.prototype.clean=function(a){var b;for(b=0;b<this.length;)this[b]===a&&(this.splice(b,1),b--),b++;return this};String.prototype.wrapInBraces=function(){return this.replace(/^/,"{").replace(/$/,"}")};String.prototype.replaceSquareBracketsWithBraces=function(){return this.replace(/\[/g,"{").replace(/\]/g,"}")};String.prototype.removeWhitespace=function(){return this.replace(/\s+/g,"")};this.Parser=function(){function a(b){this.defaults=b}a.prototype.parse=function(b){var e;e={};if(""===
b)return e;b=this._prepareString(b);return this._toJSON(b)};a.prototype.addDefaultValue=function(b,e){this.defaults||(this.defaults={});return this.defaults[b]=e};a.prototype._prepareString=function(b){b=b.removeWhitespace();this.defaults&&(b=this._applyOptionValues(b));b=this._setUndefinedValues(b);return this._wrapWordsInQuotes(b)};a.prototype._applyOptionValues=function(b){var e,d,c,a,f;d="";b=this._splitIntoWords(b);e=a=0;for(f=b.length;a<f;e=++a)c=b[e],e=b[e+1],this.defaults[c]&&":"!==e&&(c+=
":"+this.defaults[c]),d+=c;return d};a.prototype._setUndefinedValues=function(b){var e,d,c,a,f,h;c=this._splitIntoWords(b);e=f=0;for(h=c.length;f<h;e=++f)if(a=c[e],b=c[e+1],d=c[e-1],/\]+/.test(b)&&":"!==d||","===b||void 0===b&&!/\]+/.test(a))c[e]+=":undefined";b=c.join("");e="";a=b.split(/(\[|,|\])/);d=0;for(c=a.length;d<c;d++)b=a[d],/.*:.*:.*/.test(b)&&(b=b.replace(":undefined","")),e+=b;return e};a.prototype._splitIntoWords=function(b){return split(b,/(:\[?|\]+,?|,)/).clean("")};a.prototype._wrapWordsInQuotes=
function(b){var a,d,c,g;a=this._splitIntoWords(b);b=c=0;for(g=a.length;c<g;b=++c)d=a[b],":"===d||/\]+/.test(d)||(":["===d||","===d)||(/^\d+$/.test(d)?a[b]=parseInt(d):a[b]="true"===d?!0:"false"===d?!1:'"'+d+'"');return a.join("")};a.prototype._toJSON=function(b){/\.*:\.*/.test(b)||(b+=':"undefined"');b=b.replaceSquareBracketsWithBraces().wrapInBraces();b=b.replace(/\\/g,"\\\\");return JSON.parse(b)};return a}()}).call(this);
[].filter||(Array.prototype.filter=function(a,b,e,d,c){e=this;d=[];for(c in e)~~c+""==c&&0<=c&&a.call(b,e[c],+c,e)&&d.push(e[c]);return d});
(function(){Object.keys||(Object.keys=function(a){var b,e;b=[];e=void 0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&b.push(e);return b});String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};window.toSentence=function(a){switch(a.length){case 0:a="";break;case 1:a=a[0];break;case 2:a=a[0]+" and "+a[1];break;default:a=a.slice(0,-1).join(", ")+", and "+a[a.length-1]}return a}}).call(this);
(function(){this.Errors=function(){function a(){this.errors=[]}a.prototype.add=function(b){var a,d,c,g;if(b){if("string"===typeof b)return this.errors.push(b);g=[];d=0;for(c=b.length;d<c;d++)a=b[d],g.push(this.errors.push(a));return g}};a.prototype.none=function(){return 0===this.errors.length?!0:!1};a.prototype.fullMessages=function(){return window.toSentence(this.errors).toLowerCase().capitalize()};a.prototype.all=function(){return this.errors};a.prototype.alwaysReturn=function(a){return this.none=
function(){return a}};a.prototype.alwaysNoneIf=function(a){if(a)return this.alwaysReturn([])};a.prototype.alwaysNone=function(){return this.alwaysReturn([])};return a}()}).call(this);
(function(){this.Group=function(){function a(a){this.name=a}a.prototype.fields=function(){return this._findInputs()};a.prototype.invalidFields=function(){return this._findInputs("[data-error-message]")};a.prototype.validFields=function(){return this._findInputs(":not([data-error-message])")};a.prototype.containsValidFields=function(){return this.fields().length!==this.invalidFields().length};a.prototype._findInputs=function(a){null==a&&(a="");return document.querySelectorAll('[data-validation*="group:'+
this.name+'"]'+a)};return a}()}).call(this);
(function(){this.InputWithValidations=function(){function a(a){this.parser=new Parser;this.input=a;this.customMessage=this.input.getAttribute("data-custom-error-message");this.isInGroup()&&(this.group=new Group(this.groupName()))}a.prototype.setupErrorMessage=function(a){return this.input.setAttribute("data-error-message",this.customMessage||a)};a.prototype.resetErrorMessages=function(){return this.input.removeAttribute("data-error-message")};a.prototype.validations=function(){return this.input.getAttribute("data-validation")?
this.parser.parse(this.input.getAttribute("data-validation")):{}};a.prototype.asHtmlNode=function(){return this.input};a.prototype.isInGroup=function(){return this.validations().group};a.prototype.withoutGroup=function(){var b,e;b=this.input.cloneNode(!1);e=b.getAttribute("data-validation").replace(" ","").split(",").filter(function(a){return!/group:/.test(a)}).join(",");b.setAttribute("data-validation",e);return new a(b)};a.prototype.groupName=function(){return this.validations().group};a.prototype.isEmpty=
function(){return"select"===this.input.nodeName.toLowerCase()?this.input.querySelector("option").text===this.input.value||""===this.input.value?!0:!1:/^.+$/.test(this.input.value)?!1:!0};return a}()}).call(this);
(function(){var a=[].indexOf||function(a){for(var e=0,d=this.length;e<d;e++)if(e in this&&this[e]===a)return e;return-1};this.RangeValidation=function(){function b(a,d,c){this.length=a;this.min=d;this.max=c}b.prototype.validate=function(){var b,d,c;if(this.max&&this.min&&(b=this.length,0>a.call(function(){c=[];for(var a=d=this.min,b=this.max;d<=b?a<=b:a>=b;d<=b?a++:a--)c.push(a);return c}.apply(this),b)))return this.mixedMessage();if(this.min&&this.length<this.min)return this.tooShortMessage();if(this.max&&
this.length>this.max)return this.tooLongMessage()};return b}()}).call(this);
(function(){var a,b={}.hasOwnProperty,e=function(a,c){function e(){this.constructor=a}for(var f in c)b.call(c,f)&&(a[f]=c[f]);e.prototype=c.prototype;a.prototype=new e;a.__super__=c.prototype;return a};this.CharacterCountValidation=function(b){function c(){return a=c.__super__.constructor.apply(this,arguments)}e(c,b);c.prototype.mixedMessage=function(){return"Value most be at least "+this.min+" and maximum "+this.max+" characters long"};c.prototype.tooShortMessage=function(){return"Value most be at least "+
this.min};c.prototype.tooLongMessage=function(){return"Value can't be longer than "+this.max};return c}(RangeValidation)}).call(this);
(function(){var a,b={}.hasOwnProperty,e=function(a,c){function e(){this.constructor=a}for(var f in c)b.call(c,f)&&(a[f]=c[f]);e.prototype=c.prototype;a.prototype=new e;a.__super__=c.prototype;return a};this.WordCountValidation=function(b){function c(){return a=c.__super__.constructor.apply(this,arguments)}e(c,b);c.prototype.mixedMessage=function(){return"Can't contain less than "+this.min+" or more than "+this.max+" words"};c.prototype.tooShortMessage=function(){return"Can't contain less than "+this.min+
" words"};c.prototype.tooLongMessage=function(){return"Can't contain more than "+this.max+" words"};return c}(RangeValidation)}).call(this);
(function(){var a;a={};this.FormValidator=function(){function b(){this._setupBuiltInValidations()}b.prototype.defineValidation=function(a,b,c){return this._validations[a]={validationHandler:b,errorMessage:c}};b.prototype.validateForm=function(a){var b,c,g;b=a.querySelectorAll("[data-validation]");c=0;for(g=b.length;c<g;c++)a=b[c],this.validateInput(a);c=0;for(g=b.length;c<g;c++)if(a=b[c],a.hasAttribute("data-error-message"))return!1;return!0};b.prototype.validateInput=function(b){var d,c,g,f;b=new InputWithValidations(b);
a=new Errors;if(b.isInGroup()){c=b.group.fields();g=[];for(f=c.length;f--;g.unshift(c[f]));c=0;for(f=g.length;c<f;c++)if(d=g[c],d=(new InputWithValidations(d)).withoutGroup().asHtmlNode(),this.validateInput(d))return!0}else this._performBuiltinValidations(b.asHtmlNode(),b.validations()),this._performFormatValidation(b.asHtmlNode(),b.validations().format);b.resetErrorMessages();if(a.none())return!0;b.setupErrorMessage(a.fullMessages());return!1};b.prototype._validations={};b.prototype._performFormatValidation=
function(b,d){var c,g,f,h,k;if(d){h=Object.keys(d);k=[];g=0;for(f=h.length;g<f;g++)c=h[g],this._validations[c].validationHandler.test(b.value)?k.push(void 0):k.push(a.add(this._validations[c].errorMessage));return k}};b.prototype._performBuiltinValidations=function(b,d){var c,g,f,h,k;h=Object.keys(d);k=[];g=0;for(f=h.length;g<f;g++)c=h[g],"format"!==c?(c=this._validations[c].validationHandler(b,d),k.push(a.add(c))):k.push(void 0);return k};b.prototype._setupBuiltInValidations=function(){this.defineValidation("email",
/.+@.+\..+/,"Email is invalid");this.defineValidation("tel",/^\d{8}$/,"Telephone number is invalid");this.defineValidation("number",/^\d+$/,"Invalid");this.defineValidation("required",function(a,b){if((new InputWithValidations(a)).isEmpty())return"Can't be blank";if(("checkbox"===a.getAttribute("type")||"radio"===a.getAttribute("type"))&&!a.checked)return"Most be checked"});this.defineValidation("length",function(a,b){return(new CharacterCountValidation(a.value.length,b.length.min,b.length.max)).validate()});
this.defineValidation("wordCount",function(a,b){var c;c=""===a.value?c=0:a.value.split(/[ ]+/).length;return(new WordCountValidation(c,b.wordCount.min,b.wordCount.max)).validate()});this.defineValidation("allowEmpty",function(b,d){return a.alwaysNoneIf(""===b.value)});this.defineValidation("onlyIfChecked",function(b,d){return a.alwaysNoneIf(!document.getElementById(d.onlyIfChecked).checked)});this.defineValidation("onlyIfEmpty",function(b,d){if(!(new InputWithValidations(document.getElementById(d.onlyIfEmpty))).isEmpty())return a.alwaysNone()});
return this.defineValidation("group",function(a,b){})};return b}();this.FormValidator.version="0.3.1"}).call(this);
(function(a,b,e,d){function c(b,c){this.element=b;this.options=a.extend({},f,c);this._defaults=f;this._name=g;this.init()}var g="validate",f={validator:new FormValidator,onBlur:!1,selectorClasses:{field:".field"},errorClasses:{input:"input-with-error",field:"field-with-error",form:"form-with-error"},beforeValidation:function(){},afterValidation:function(){},ifValid:function(){},ifInvalid:function(){},formWrapperSelector:d};c.prototype={version:"0.3",init:function(){var b=this,c=b.element,d=b.options,
f=d.validator,g=!0;c.setAttribute("novalidate","true");a(e).on("keydown",function(b){var c;c=13===b.keyCode?!0:void 0;c&&(b=b.target.nodeName.toLowerCase(),c="input"==b||"textarea"==b||"select"==b?!0:!1);c&&a('input[type="submit"]:not([data-skip-validation])').trigger("click")});a("input[data-skip-validation]").hover(function(){g=!1},function(){g=!0}).on("click",function(a){g&&a.preventDefault()});var n=null;a(e).on("click",function(a){n=a.target});a(c).on("submit",function(e){if(g){d.beforeValidation(e);
var q=[];a(n).parents(d.formWrapperSelector).find("[data-validation]").each(function(){var a=f.validateInput(this);q.push(a);f.validateInput(this)||e.preventDefault()});-1!=q.indexOf(!1)?d.ifInvalid(e):d.ifValid(e);b.setErrorClasses(c,d);b.setErrorMessages(c,d);a(".input-with-error").first().focus();d.afterValidation(e)}});if(d.onBlur)a(c).find("[data-validation]").on("blur",function(a){f.validateInput(this);b.setErrorClasses(c,d);b.setErrorMessages(c,d)})},setErrorClasses:function(b,c){a("."+c.errorClasses.input).removeClass(c.errorClasses.input);
a("."+c.errorClasses.field).removeClass(c.errorClasses.field);a("."+c.errorClasses.form).removeClass(c.errorClasses.form);a(b).find("[data-error-message]").each(function(){var d=a(this),e=d.parents(c.selectorClasses.field),f=a(b);d.addClass(c.errorClasses.input);e.addClass(c.errorClasses.field);f.addClass(c.errorClasses.form)})},setErrorMessages:function(b,c){a(b).find("small.error-message").remove();a(b).find("[data-error-message]").each(function(){var b=a(this).data("errorMessage");a(this).after('<small class="error-message">'+
b+"</small>")})}};a.fn[g]=function(b){return this.each(function(){a.data(this,"plugin_"+g)||a.data(this,"plugin_"+g,new c(this,b))})}})(jQuery,window,document);
