var split;
split=split||function(b){var a=String.prototype.split,h=/()??/.exec("")[1]===b,d;d=function(f,c,d){if("[object RegExp]"!==Object.prototype.toString.call(c))return a.call(f,c,d);var e=[],m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.extended?"x":"")+(c.sticky?"y":""),k=0;c=RegExp(c.source,m+"g");var p,l,q;f+="";h||(p=RegExp("^"+c.source+"$(?!\\s)",m));for(d=d===b?4294967295:d>>>0;l=c.exec(f);){m=l.index+l[0].length;if(m>k&&(e.push(f.slice(k,l.index)),!h&&1<l.length&&l[0].replace(p,function(){for(var g=1;g<
arguments.length-2;g++)arguments[g]===b&&(l[g]=b)}),1<l.length&&l.index<f.length&&Array.prototype.push.apply(e,l.slice(1)),q=l[0].length,k=m,e.length>=d))break;c.lastIndex===l.index&&c.lastIndex++}k===f.length?(q||!c.test(""))&&e.push(""):e.push(f.slice(k));return e.length>d?e.slice(0,d):e};String.prototype.split=function(a,c){return d(this,a,c)};return d}();
(function(){Array.prototype.clean=function(b){var a;for(a=0;a<this.length;)this[a]===b&&(this.splice(a,1),a--),a++;return this};String.prototype.wrapInBraces=function(){return this.replace(/^/,"{").replace(/$/,"}")};String.prototype.replaceSquareBracketsWithBraces=function(){return this.replace(/\[/g,"{").replace(/\]/g,"}")};String.prototype.removeWhitespace=function(){return this.replace(/\s+/g,"")};this.Parser=function(){function b(a){this.defaults=a}b.prototype.parse=function(a){var h;h={};if(""===
a)return h;a=this._prepareString(a);return this._toJSON(a)};b.prototype.addDefaultValue=function(a,h){this.defaults||(this.defaults={});return this.defaults[a]=h};b.prototype._prepareString=function(a){a=a.removeWhitespace();this.defaults&&(a=this._applyOptionValues(a));a=this._setUndefinedValues(a);return this._wrapWordsInQuotes(a)};b.prototype._applyOptionValues=function(a){var h,d,b,c,n;d="";a=this._splitIntoWords(a);h=c=0;for(n=a.length;c<n;h=++c)b=a[h],h=a[h+1],this.defaults[b]&&":"!==h&&(b+=
":"+this.defaults[b]),d+=b;return d};b.prototype._setUndefinedValues=function(a){var b,d,f,c,n,e;f=this._splitIntoWords(a);b=n=0;for(e=f.length;n<e;b=++n)if(c=f[b],a=f[b+1],d=f[b-1],/\]+/.test(a)&&":"!==d||","===a||void 0===a&&!/\]+/.test(c))f[b]+=":undefined";a=f.join("");b="";c=a.split(/(\[|,|\])/);d=0;for(f=c.length;d<f;d++)a=c[d],/.*:.*:.*/.test(a)&&(a=a.replace(":undefined","")),b+=a;return b};b.prototype._splitIntoWords=function(a){return split(a,/(:\[?|\]+,?|,)/).clean("")};b.prototype._wrapWordsInQuotes=
function(a){var b,d,f,c;b=this._splitIntoWords(a);a=f=0;for(c=b.length;f<c;a=++f)d=b[a],":"===d||/\]+/.test(d)||(":["===d||","===d)||(/^\d+$/.test(d)?b[a]=parseInt(d):b[a]="true"===d?!0:"false"===d?!1:'"'+d+'"');return b.join("")};b.prototype._toJSON=function(a){/\.*:\.*/.test(a)||(a+=':"undefined"');a=a.replaceSquareBracketsWithBraces().wrapInBraces();a=a.replace(/\\/g,"\\\\");return JSON.parse(a)};return b}()}).call(this);
(function(){var b,a,h,d,f,c,n,e,m,k=[].indexOf||function(a){for(var g=0,b=this.length;g<b;g++)if(g in this&&this[g]===a)return g;return-1},p={}.hasOwnProperty,l=function(a,g){function b(){this.constructor=a}for(var c in g)p.call(g,c)&&(a[c]=g[c]);b.prototype=g.prototype;a.prototype=new b;a.__super__=g.prototype;return a};c={};Object.keys||(Object.keys=function(a){var g,b;g=[];b=void 0;for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&g.push(b);return g});String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+
this.slice(1)};n=function(a){switch(a.length){case 0:a="";break;case 1:a=a[0];break;case 2:a=a[0]+" and "+a[1];break;default:a=a.slice(0,-1).join(", ")+", and "+a[a.length-1]}return a};a=function(){function a(){this.errors=[]}a.prototype.add=function(a){var b,c,d,e;if(a){if("string"===typeof a)return this.errors.push(a);e=[];c=0;for(d=a.length;c<d;c++)b=a[c],e.push(this.errors.push(b));return e}};a.prototype.none=function(){return 0===this.errors.length?!0:!1};a.prototype.alwaysReturn=function(a){return this.none=
function(){return a}};a.prototype.fullMessages=function(){return n(this.errors).toLowerCase().capitalize()};a.prototype.all=function(){return this.errors};return a}();d=function(){function a(b){this.input=b;this.customMessage=this.input.getAttribute("data-custom-error-message")}a.prototype.setupErrorMessage=function(a){return this.input.setAttribute("data-error-message",this.customMessage||a)};a.prototype.resetErrorMessages=function(){return this.input.removeAttribute("data-error-message")};a.prototype.validations=
function(){return this.input.getAttribute("data-validation")};a.prototype.asHtmlNode=function(){return this.input};return a}();h=function(){function a(b,c,d){this.length=b;this.min=c;this.max=d}a.prototype.validate=function(){var a,b,c;if(this.max&&this.min&&(a=this.length,0>k.call(function(){c=[];for(var a=b=this.min,g=this.max;b<=g?a<=g:a>=g;b<=g?a++:a--)c.push(a);return c}.apply(this),a)))return this.mixedMessage();if(this.min&&this.length<this.min)return this.tooShortMessage();if(this.max&&this.length>
this.max)return this.tooLongMessage()};return a}();b=function(a){function b(){return e=b.__super__.constructor.apply(this,arguments)}l(b,a);b.prototype.mixedMessage=function(){return"Value most be at least "+this.min+" and maximum "+this.max+" characters long"};b.prototype.tooShortMessage=function(){return"Value most be at least "+this.min};b.prototype.tooLongMessage=function(){return"Value can't be longer than "+this.max};return b}(h);f=function(a){function b(){return m=b.__super__.constructor.apply(this,
arguments)}l(b,a);b.prototype.mixedMessage=function(){return"Can't contain less than "+this.min+" or more than "+this.max+" words"};b.prototype.tooShortMessage=function(){return"Can't contain less than "+this.min+" words"};b.prototype.tooLongMessage=function(){return"Can't contain more than "+this.max+" words"};return b}(h);this.FormValidator=function(){function e(){var a;a=new Parser;a.addDefaultValue("required",!0);a.addDefaultValue("allowEmpty",!0);this.parser=a;this._setupBuiltInValidations()}
e.prototype.defineValidation=function(a,b,c){return this._validations[a]={validationHandler:b,errorMessage:c}};e.prototype.validateForm=function(a){var b,c,e,d;b=a.querySelectorAll("[data-validation]");c=[];e=0;for(d=b.length;e<d;e++)a=b[e],c.push(this.validateInput(a));return 0<=k.call(c,!1)?!1:!0};e.prototype.validateInput=function(b){var e;b=new d(b);e=this._generateValidations(b.validations());c=new a;this._performBuiltinValidations(b.asHtmlNode(),e);this._performFormatValidation(b.asHtmlNode(),
e.format);b.resetErrorMessages();if(c.none())return!0;b.setupErrorMessage(c.fullMessages());return!1};e.prototype._validations={};e.prototype._performFormatValidation=function(a,b){var e,d,m,f,k;if(b){f=Object.keys(b);k=[];d=0;for(m=f.length;d<m;d++)e=f[d],this._validations[e].validationHandler.test(a.value)?k.push(void 0):k.push(c.add(this._validations[e].errorMessage));return k}};e.prototype._performBuiltinValidations=function(a,b){var e,d,f,m,k;m=Object.keys(b);k=[];d=0;for(f=m.length;d<f;d++)e=
m[d],"format"!==e?(e=this._validations[e].validationHandler(a,b),k.push(c.add(e))):k.push(void 0);return k};e.prototype._setupBuiltInValidations=function(){var a=this;this.defineValidation("email",/.+@.+\..+/,"Email is invalid");this.defineValidation("tel",/\d{8}/,"Telephone number is invalid");this.defineValidation("number",/^\d+$/,"Invalid");this.defineValidation("required",function(a,b){if("checkbox"===a.getAttribute("type")){if(!a.checked)return"Most be checked"}else if(!/^.+$/.test(a.value))return"Can't be blank"});
this.defineValidation("length",function(a,e){return(new b(a.value.length,e.length.min,e.length.max)).validate()});this.defineValidation("wordCount",function(a,b){var e;e=""===a.value?e=0:a.value.split(/[ ]+/).length;return(new f(e,b.wordCount.min,b.wordCount.max)).validate()});this.defineValidation("allowEmpty",function(b,e){return a._alwaysValidIf(""===b.value)});return this.defineValidation("onlyIfChecked",function(b,e){return a._alwaysValidIf(!document.getElementById(e.onlyIfChecked).checked)})};
e.prototype._alwaysValidIf=function(a){if(a)return c.alwaysReturn([])};e.prototype._generateValidations=function(a){return this.parser.parse(a)};return e}()}).call(this);
(function(b,a,h,d){function f(a,d){this.element=a;this.options=b.extend({},n,d);this._defaults=n;this._name=c;this.init()}var c="validate",n={validator:new FormValidator,onBlur:!1,selectorClasses:{field:".field"},errorClasses:{input:"input-with-error",field:"field-with-error",form:"form-with-error"}};f.prototype={init:function(){var a=this,c=a.element,d=a.options,f=d.validator;c.setAttribute("novalidate","true");b(c).on("submit",function(l){f.validateForm(c)||l.preventDefault();a.setErrorClasses(c,
d);a.setErrorMessages(c,d);b(".input-with-error").first().focus()});if(d.onBlur)b(c).find("[data-validation]").on("blur",function(b){f.validateInput(this);a.setErrorClasses(c,d);a.setErrorMessages(c,d)})},setErrorClasses:function(a,c){b("."+c.errorClasses.input).removeClass(c.errorClasses.input);b("."+c.errorClasses.field).removeClass(c.errorClasses.field);b("."+c.errorClasses.form).removeClass(c.errorClasses.form);b(a).find("[data-error-message]").each(function(){var d=b(this),f=d.parents(c.selectorClasses.field),
h=b(a);d.addClass(c.errorClasses.input);f.addClass(c.errorClasses.field);h.addClass(c.errorClasses.form)})},setErrorMessages:function(a,c){b(a).find("small.error-message").remove();b(a).find("[data-error-message]").each(function(){var a=this.dataset.errorMessage;b(this).after('<small class="error-message">'+a+"</small>")})}};b.fn[c]=function(a){return this.each(function(){b.data(this,"plugin_"+c)||b.data(this,"plugin_"+c,new f(this,a))})}})(jQuery,window,document);
