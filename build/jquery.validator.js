var split;
split=split||function(a){var g=String.prototype.split,b=/()??/.exec("")[1]===a,c;c=function(c,e,f){if("[object RegExp]"!==Object.prototype.toString.call(e))return g.call(c,e,f);var h=[],k=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),l=0;e=RegExp(e.source,k+"g");var p,m,n;c+="";b||(p=RegExp("^"+e.source+"$(?!\\s)",k));for(f=f===a?4294967295:f>>>0;m=e.exec(c);){k=m.index+m[0].length;if(k>l&&(h.push(c.slice(l,m.index)),!b&&1<m.length&&m[0].replace(p,function(){for(var c=1;c<
arguments.length-2;c++)arguments[c]===a&&(m[c]=a)}),1<m.length&&m.index<c.length&&Array.prototype.push.apply(h,m.slice(1)),n=m[0].length,l=k,h.length>=f))break;e.lastIndex===m.index&&e.lastIndex++}l===c.length?(n||!e.test(""))&&h.push(""):h.push(c.slice(l));return h.length>f?h.slice(0,f):h};String.prototype.split=function(g,a){return c(this,g,a)};return c}();
(function(){Array.prototype.clean=function(a){var g;for(g=0;g<this.length;)this[g]===a&&(this.splice(g,1),g--),g++;return this};String.prototype.wrapInBraces=function(){return this.replace(/^/,"{").replace(/$/,"}")};String.prototype.replaceSquareBracketsWithBraces=function(){return this.replace(/\[/g,"{").replace(/\]/g,"}")};String.prototype.removeWhitespace=function(){return this.replace(/\s+/g,"")};this.Parser=function(){function a(g){this.defaults=g}a.prototype.parse=function(g){var a;a={};if(""===
g)return a;g=this._prepareString(g);return this._toJSON(g)};a.prototype.addDefaultValue=function(a,b){this.defaults||(this.defaults={});return this.defaults[a]=b};a.prototype._prepareString=function(a){a=a.removeWhitespace();this.defaults&&(a=this._applyOptionValues(a));a=this._setUndefinedValues(a);return this._wrapWordsInQuotes(a)};a.prototype._applyOptionValues=function(a){var b,c,d,e,f;c="";a=this._splitIntoWords(a);b=e=0;for(f=a.length;e<f;b=++e)d=a[b],b=a[b+1],this.defaults[d]&&":"!==b&&(d+=
":"+this.defaults[d]),c+=d;return c};a.prototype._setUndefinedValues=function(a){var b,c,d,e,f,h;d=this._splitIntoWords(a);b=f=0;for(h=d.length;f<h;b=++f)if(e=d[b],a=d[b+1],c=d[b-1],/\]+/.test(a)&&":"!==c||","===a||void 0===a&&!/\]+/.test(e))d[b]+=":undefined";a=d.join("");b="";e=a.split(/(\[|,|\])/);c=0;for(d=e.length;c<d;c++)a=e[c],/.*:.*:.*/.test(a)&&(a=a.replace(":undefined","")),b+=a;return b};a.prototype._splitIntoWords=function(a){return split(a,/(:\[?|\]+,?|,)/).clean("")};a.prototype._wrapWordsInQuotes=
function(a){var b,c,d,e;b=this._splitIntoWords(a);a=d=0;for(e=b.length;d<e;a=++d)c=b[a],":"===c||/\]+/.test(c)||(":["===c||","===c)||(/^\d+$/.test(c)?b[a]=parseInt(c):b[a]="true"===c?!0:"false"===c?!1:'"'+c+'"');return b.join("")};a.prototype._toJSON=function(a){/\.*:\.*/.test(a)||(a+=':"undefined"');a=a.replaceSquareBracketsWithBraces().wrapInBraces();a=a.replace(/\\/g,"\\\\");return JSON.parse(a)};return a}()}).call(this);
(function(){Object.keys||(Object.keys=function(a){var g,b;g=[];b=void 0;for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&g.push(b);return g});String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};window.toSentence=function(a){switch(a.length){case 0:a="";break;case 1:a=a[0];break;case 2:a=a[0]+" and "+a[1];break;default:a=a.slice(0,-1).join(", ")+", and "+a[a.length-1]}return a}}).call(this);
(function(){this.Errors=function(){function a(){this.errors=[]}a.prototype.add=function(a){var b,c,d,e;if(a){if("string"===typeof a)return this.errors.push(a);e=[];c=0;for(d=a.length;c<d;c++)b=a[c],e.push(this.errors.push(b));return e}};a.prototype.none=function(){return 0===this.errors.length?!0:!1};a.prototype.fullMessages=function(){return toSentence(this.errors).toLowerCase().capitalize()};a.prototype.all=function(){return this.errors};a.prototype.alwaysReturn=function(a){return this.none=function(){return a}};
a.prototype.alwaysNoneIf=function(a){if(a)return this.alwaysReturn([])};a.prototype.alwaysNone=function(){return this.alwaysReturn([])};return a}()}).call(this);
(function(){this.Group=function(){function a(a){this.name=a}a.prototype.fields=function(){return this._findInputs()};a.prototype.invalidFields=function(){return this._findInputs("[data-error-message]")};a.prototype.validFields=function(){return this._findInputs(":not([data-error-message])")};a.prototype.containsValidFields=function(){return this.fields().length!==this.invalidFields().length};a.prototype._findInputs=function(a){null==a&&(a="");return document.querySelectorAll('[data-validation*="group:'+
this.name+'"]'+a)};return a}()}).call(this);
(function(){this.InputWithValidations=function(){function a(a){this.parser=new Parser;this.input=a;this.customMessage=this.input.getAttribute("data-custom-error-message");this.isInGroup()&&(this.group=new Group(this.groupName()))}a.prototype.setupErrorMessage=function(a){return this.input.setAttribute("data-error-message",this.customMessage||a)};a.prototype.resetErrorMessages=function(){return this.input.removeAttribute("data-error-message")};a.prototype.validations=function(){return this.input.getAttribute("data-validation")?
this.parser.parse(this.input.getAttribute("data-validation")):{}};a.prototype.asHtmlNode=function(){return this.input};a.prototype.isInGroup=function(){return this.validations().group?!0:!1};a.prototype.groupName=function(){return this.validations().group};a.prototype.isEmpty=function(){return"select"===this.input.nodeName.toLowerCase()?this.input.querySelector("option").text===this.input.value||""===this.input.value?!0:!1:/^.+$/.test(this.input.value)?!1:!0};return a}()}).call(this);
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};this.RangeValidation=function(){function g(a,c,d){this.length=a;this.min=c;this.max=d}g.prototype.validate=function(){var b,c,d;if(this.max&&this.min&&(b=this.length,0>a.call(function(){d=[];for(var a=c=this.min,b=this.max;c<=b?a<=b:a>=b;c<=b?a++:a--)d.push(a);return d}.apply(this),b)))return this.mixedMessage();if(this.min&&this.length<this.min)return this.tooShortMessage();if(this.max&&
this.length>this.max)return this.tooLongMessage()};return g}()}).call(this);
(function(){var a,g={}.hasOwnProperty,b=function(a,d){function b(){this.constructor=a}for(var f in d)g.call(d,f)&&(a[f]=d[f]);b.prototype=d.prototype;a.prototype=new b;a.__super__=d.prototype;return a};this.CharacterCountValidation=function(c){function d(){return a=d.__super__.constructor.apply(this,arguments)}b(d,c);d.prototype.mixedMessage=function(){return"Value most be at least "+this.min+" and maximum "+this.max+" characters long"};d.prototype.tooShortMessage=function(){return"Value most be at least "+
this.min};d.prototype.tooLongMessage=function(){return"Value can't be longer than "+this.max};return d}(RangeValidation)}).call(this);
(function(){var a,g={}.hasOwnProperty,b=function(a,d){function b(){this.constructor=a}for(var f in d)g.call(d,f)&&(a[f]=d[f]);b.prototype=d.prototype;a.prototype=new b;a.__super__=d.prototype;return a};this.WordCountValidation=function(c){function d(){return a=d.__super__.constructor.apply(this,arguments)}b(d,c);d.prototype.mixedMessage=function(){return"Can't contain less than "+this.min+" or more than "+this.max+" words"};d.prototype.tooShortMessage=function(){return"Can't contain less than "+this.min+
" words"};d.prototype.tooLongMessage=function(){return"Can't contain more than "+this.max+" words"};return d}(RangeValidation)}).call(this);
(function(){var a,g=[].indexOf||function(a){for(var c=0,d=this.length;c<d;c++)if(c in this&&this[c]===a)return c;return-1};a={};this.FormValidator=function(){function b(){this._setupBuiltInValidations()}b.prototype.defineValidation=function(a,d,b){return this._validations[a]={validationHandler:d,errorMessage:b}};b.prototype.validateForm=function(a){var d,b,f,h,k;d=a.querySelectorAll("[data-validation]");f=[];b=0;for(h=d.length;b<h;b++)a=d[b],this.validateInput(a);h=0;for(k=d.length;h<k;h++)a=d[h],
b=new InputWithValidations(a),b.isInGroup()&&b.group.containsValidFields()&&b.input.removeAttribute("data-error-message"),a.hasAttribute("data-error-message")?f.push(!1):f.push(!0);return 0<=g.call(f,!1)?!1:!0};b.prototype.validateInput=function(c){c=new InputWithValidations(c);a=new Errors;this._performBuiltinValidations(c.asHtmlNode(),c.validations());this._performFormatValidation(c.asHtmlNode(),c.validations().format);c.resetErrorMessages();if(a.none())return!0;c.setupErrorMessage(a.fullMessages());
return!1};b.prototype._validations={};b.prototype._performFormatValidation=function(c,d){var b,f,h,k,l;if(d){k=Object.keys(d);l=[];f=0;for(h=k.length;f<h;f++)b=k[f],this._validations[b].validationHandler.test(c.value)?l.push(void 0):l.push(a.add(this._validations[b].errorMessage));return l}};b.prototype._performBuiltinValidations=function(c,b){var e,f,h,k,l;k=Object.keys(b);l=[];f=0;for(h=k.length;f<h;f++)e=k[f],"format"!==e?(e=this._validations[e].validationHandler(c,b),l.push(a.add(e))):l.push(void 0);
return l};b.prototype._setupBuiltInValidations=function(){this.defineValidation("email",/.+@.+\..+/,"Email is invalid");this.defineValidation("tel",/^\d{8}$/,"Telephone number is invalid");this.defineValidation("number",/^\d+$/,"Invalid");this.defineValidation("required",function(a,b){if((new InputWithValidations(a)).isEmpty())return"Can't be blank";if("checkbox"===a.getAttribute("type")&&!a.checked)return"Most be checked"});this.defineValidation("length",function(a,b){return(new CharacterCountValidation(a.value.length,
b.length.min,b.length.max)).validate()});this.defineValidation("wordCount",function(a,b){var e;e=""===a.value?e=0:a.value.split(/[ ]+/).length;return(new WordCountValidation(e,b.wordCount.min,b.wordCount.max)).validate()});this.defineValidation("allowEmpty",function(b,d){return a.alwaysNoneIf(""===b.value)});this.defineValidation("onlyIfChecked",function(b,d){return a.alwaysNoneIf(!document.getElementById(d.onlyIfChecked).checked)});this.defineValidation("onlyIfEmpty",function(b,d){if(!(new InputWithValidations(document.getElementById(d.onlyIfEmpty))).isEmpty())return a.alwaysNone()});
return this.defineValidation("group",function(a,b){})};return b}()}).call(this);
(function(a,g,b,c){function d(b,c){this.element=b;this.options=a.extend({},f,c);this._defaults=f;this._name=e;this.init()}var e="validate",f={validator:new FormValidator,onBlur:!1,selectorClasses:{field:".field"},errorClasses:{input:"input-with-error",field:"field-with-error",form:"form-with-error"},beforeValidation:function(){},afterValidation:function(){},ifValid:function(){},ifInvalid:function(){},formWrapperSelector:c};d.prototype={init:function(){var c=this,d=c.element,e=c.options,f=e.validator,
g=!0;d.setAttribute("novalidate","true");a(b).on("keydown",function(b){var c;c=13===b.keyCode?!0:void 0;c&&(b=b.target.nodeName.toLowerCase(),c="input"==b||"textarea"==b||"select"==b?!0:!1);c&&a('input[type="submit"]:not([data-skip-validation])').trigger("click")});a("input[data-skip-validation]").hover(function(){g=!1},function(){g=!0}).on("click",function(a){g&&a.preventDefault()});var n=null;a(b).on("click",function(a){n=a.target});a(d).on("submit",function(b){if(g){e.beforeValidation();var q=
[];a(n).parents(e.formWrapperSelector).find("[data-validation]").each(function(){var a=f.validateInput(this);q.push(a);f.validateInput(this)||b.preventDefault()});-1!=q.indexOf(!1)?e.ifInvalid():e.ifValid();c.setErrorClasses(d,e);c.setErrorMessages(d,e);a(".input-with-error").first().focus();e.afterValidation()}});if(e.onBlur)a(d).find("[data-validation]").on("blur",function(a){f.validateInput(this);c.setErrorClasses(d,e);c.setErrorMessages(d,e)})},setErrorClasses:function(b,c){a("."+c.errorClasses.input).removeClass(c.errorClasses.input);
a("."+c.errorClasses.field).removeClass(c.errorClasses.field);a("."+c.errorClasses.form).removeClass(c.errorClasses.form);a(b).find("[data-error-message]").each(function(){var d=a(this),e=d.parents(c.selectorClasses.field),f=a(b);d.addClass(c.errorClasses.input);e.addClass(c.errorClasses.field);f.addClass(c.errorClasses.form)})},setErrorMessages:function(b,c){a(b).find("small.error-message").remove();a(b).find("[data-error-message]").each(function(){var b=this.dataset.errorMessage;a(this).after('<small class="error-message">'+
b+"</small>")})}};a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}})(jQuery,window,document);
