var split;
split=split||function(a){var c=String.prototype.split,e=/()??/.exec("")[1]===a,d;d=function(b,d,h){if("[object RegExp]"!==Object.prototype.toString.call(d))return c.call(b,d,h);var g=[],l=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),m=0;d=RegExp(d.source,l+"g");var n,k,p;b+="";e||(n=RegExp("^"+d.source+"$(?!\\s)",l));for(h=h===a?4294967295:h>>>0;k=d.exec(b);){l=k.index+k[0].length;if(l>m&&(g.push(b.slice(m,k.index)),!e&&1<k.length&&k[0].replace(n,function(){for(var d=1;d<
arguments.length-2;d++)arguments[d]===a&&(k[d]=a)}),1<k.length&&k.index<b.length&&Array.prototype.push.apply(g,k.slice(1)),p=k[0].length,m=l,g.length>=h))break;d.lastIndex===k.index&&d.lastIndex++}m===b.length?(p||!d.test(""))&&g.push(""):g.push(b.slice(m));return g.length>h?g.slice(0,h):g};String.prototype.split=function(c,a){return d(this,c,a)};return d}();
(function(){Array.prototype.clean=function(a){var c;for(c=0;c<this.length;)this[c]===a&&(this.splice(c,1),c--),c++;return this};String.prototype.wrapInBraces=function(){return this.replace(/^/,"{").replace(/$/,"}")};String.prototype.replaceSquareBracketsWithBraces=function(){return this.replace(/\[/g,"{").replace(/\]/g,"}")};String.prototype.removeWhitespace=function(){return this.replace(/\s+/g,"")};this.Parser=function(){function a(c){this.defaults=c}a.prototype.parse=function(c){var a;a={};if(""===
c)return a;c=this._prepareString(c);return this._toJSON(c)};a.prototype.addDefaultValue=function(c,a){this.defaults||(this.defaults={});return this.defaults[c]=a};a.prototype._prepareString=function(c){c=c.removeWhitespace();this.defaults&&(c=this._applyOptionValues(c));c=this._setUndefinedValues(c);return this._wrapWordsInQuotes(c)};a.prototype._applyOptionValues=function(c){var a,d,b,f,h;d="";c=this._splitIntoWords(c);a=f=0;for(h=c.length;f<h;a=++f)b=c[a],a=c[a+1],this.defaults[b]&&":"!==a&&(b+=
":"+this.defaults[b]),d+=b;return d};a.prototype._setUndefinedValues=function(c){var a,d,b,f,h,g;b=this._splitIntoWords(c);a=h=0;for(g=b.length;h<g;a=++h)if(f=b[a],c=b[a+1],d=b[a-1],/\]+/.test(c)&&":"!==d||","===c||void 0===c&&!/\]+/.test(f))b[a]+=":undefined";c=b.join("");a="";f=c.split(/(\[|,|\])/);d=0;for(b=f.length;d<b;d++)c=f[d],/.*:.*:.*/.test(c)&&(c=c.replace(":undefined","")),a+=c;return a};a.prototype._splitIntoWords=function(a){return split(a,/(:\[?|\]+,?|,)/).clean("")};a.prototype._wrapWordsInQuotes=
function(a){var e,d,b,f;e=this._splitIntoWords(a);a=b=0;for(f=e.length;b<f;a=++b)d=e[a],":"===d||/\]+/.test(d)||(":["===d||","===d)||(/^\d+$/.test(d)?e[a]=parseInt(d):e[a]="true"===d?!0:"false"===d?!1:'"'+d+'"');return e.join("")};a.prototype._toJSON=function(a){/\.*:\.*/.test(a)||(a+=':"undefined"');a=a.replaceSquareBracketsWithBraces().wrapInBraces();a=a.replace(/\\/g,"\\\\");return JSON.parse(a)};return a}()}).call(this);
(function(){Object.keys||(Object.keys=function(a){var c,e;c=[];e=void 0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&c.push(e);return c});String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};window.toSentence=function(a){switch(a.length){case 0:a="";break;case 1:a=a[0];break;case 2:a=a[0]+" and "+a[1];break;default:a=a.slice(0,-1).join(", ")+", and "+a[a.length-1]}return a}}).call(this);
(function(){this.Errors=function(){function a(){this.errors=[]}a.prototype.add=function(a){var e,d,b,f;if(a){if("string"===typeof a)return this.errors.push(a);f=[];d=0;for(b=a.length;d<b;d++)e=a[d],f.push(this.errors.push(e));return f}};a.prototype.none=function(){return 0===this.errors.length?!0:!1};a.prototype.fullMessages=function(){return toSentence(this.errors).toLowerCase().capitalize()};a.prototype.all=function(){return this.errors};a.prototype.alwaysReturn=function(a){return this.none=function(){return a}};
a.prototype.alwaysNoneIf=function(a){if(a)return this.alwaysReturn([])};a.prototype.alwaysNone=function(){return this.alwaysReturn([])};return a}()}).call(this);
(function(){var a;this.InputWithValidations=function(){function c(c){this.parser=new Parser;this.input=c;this.customMessage=this.input.getAttribute("data-custom-error-message");this.isInGroup()&&(this.group=new a(this.groupName()))}c.prototype.setupErrorMessage=function(a){return this.input.setAttribute("data-error-message",this.customMessage||a)};c.prototype.resetErrorMessages=function(){return this.input.removeAttribute("data-error-message")};c.prototype.validations=function(){return this.input.getAttribute("data-validation")?
this.parser.parse(this.input.getAttribute("data-validation")):{}};c.prototype.asHtmlNode=function(){return this.input};c.prototype.isInGroup=function(){return this.validations().group?!0:!1};c.prototype.groupName=function(){return this.validations().group};c.prototype.isEmpty=function(){return"select"===this.input.nodeName.toLowerCase()?this.input.querySelector("option").text===this.input.value||""===this.input.value?!0:!1:/^.+$/.test(this.input.value)?!1:!0};return c}();a=function(){function a(c){this.name=
c}a.prototype.fields=function(){return document.querySelectorAll('[data-validation*="group:'+this.name+'"]')};a.prototype.invalidFields=function(){return document.querySelectorAll('[data-validation*="group:'+this.name+'"][data-error-message]')};a.prototype.validFields=function(){return document.querySelectorAll('[data-validation*="group:'+this.name+'"]:not([data-error-message])')};a.prototype.containsValidFields=function(){return this.fields().length!==this.invalidFields().length};return a}()}).call(this);
(function(){var a=[].indexOf||function(a){for(var e=0,d=this.length;e<d;e++)if(e in this&&this[e]===a)return e;return-1};this.RangeValidation=function(){function c(a,d,b){this.length=a;this.min=d;this.max=b}c.prototype.validate=function(){var c,d,b;if(this.max&&this.min&&(c=this.length,0>a.call(function(){b=[];for(var a=d=this.min,c=this.max;d<=c?a<=c:a>=c;d<=c?a++:a--)b.push(a);return b}.apply(this),c)))return this.mixedMessage();if(this.min&&this.length<this.min)return this.tooShortMessage();if(this.max&&
this.length>this.max)return this.tooLongMessage()};return c}()}).call(this);
(function(){var a,c={}.hasOwnProperty,e=function(a,b){function f(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);f.prototype=b.prototype;a.prototype=new f;a.__super__=b.prototype;return a};this.CharacterCountValidation=function(d){function b(){return a=b.__super__.constructor.apply(this,arguments)}e(b,d);b.prototype.mixedMessage=function(){return"Value most be at least "+this.min+" and maximum "+this.max+" characters long"};b.prototype.tooShortMessage=function(){return"Value most be at least "+
this.min};b.prototype.tooLongMessage=function(){return"Value can't be longer than "+this.max};return b}(RangeValidation)}).call(this);
(function(){var a,c={}.hasOwnProperty,e=function(a,b){function f(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);f.prototype=b.prototype;a.prototype=new f;a.__super__=b.prototype;return a};this.WordCountValidation=function(d){function b(){return a=b.__super__.constructor.apply(this,arguments)}e(b,d);b.prototype.mixedMessage=function(){return"Can't contain less than "+this.min+" or more than "+this.max+" words"};b.prototype.tooShortMessage=function(){return"Can't contain less than "+this.min+
" words"};b.prototype.tooLongMessage=function(){return"Can't contain more than "+this.max+" words"};return b}(RangeValidation)}).call(this);
(function(){var a,c=[].indexOf||function(a){for(var d=0,b=this.length;d<b;d++)if(d in this&&this[d]===a)return d;return-1};a={};this.FormValidator=function(){function e(){this._setupBuiltInValidations()}e.prototype.defineValidation=function(a,b,c){return this._validations[a]={validationHandler:b,errorMessage:c}};e.prototype.validateForm=function(a){var b,f,e,g,l;b=a.querySelectorAll("[data-validation]");e=[];f=0;for(g=b.length;f<g;f++)a=b[f],this.validateInput(a);g=0;for(l=b.length;g<l;g++)a=b[g],
f=new InputWithValidations(a),f.isInGroup()&&f.group.containsValidFields()&&f.input.removeAttribute("data-error-message"),a.hasAttribute("data-error-message")?e.push(!1):e.push(!0);return 0<=c.call(e,!1)?!1:!0};e.prototype.validateInput=function(d){d=new InputWithValidations(d);a=new Errors;this._performBuiltinValidations(d.asHtmlNode(),d.validations());this._performFormatValidation(d.asHtmlNode(),d.validations().format);d.resetErrorMessages();if(a.none())return!0;d.setupErrorMessage(a.fullMessages());
return!1};e.prototype._validations={};e.prototype._performFormatValidation=function(d,b){var c,e,g,l,m;if(b){l=Object.keys(b);m=[];e=0;for(g=l.length;e<g;e++)c=l[e],this._validations[c].validationHandler.test(d.value)?m.push(void 0):m.push(a.add(this._validations[c].errorMessage));return m}};e.prototype._performBuiltinValidations=function(d,b){var c,e,g,l,m;l=Object.keys(b);m=[];e=0;for(g=l.length;e<g;e++)c=l[e],"format"!==c?(c=this._validations[c].validationHandler(d,b),m.push(a.add(c))):m.push(void 0);
return m};e.prototype._setupBuiltInValidations=function(){this.defineValidation("email",/.+@.+\..+/,"Email is invalid");this.defineValidation("tel",/^\d{8}$/,"Telephone number is invalid");this.defineValidation("number",/^\d+$/,"Invalid");this.defineValidation("required",function(a,b){if((new InputWithValidations(a)).isEmpty())return"Can't be blank";if("checkbox"===a.getAttribute("type")&&!a.checked)return"Most be checked"});this.defineValidation("length",function(a,b){return(new CharacterCountValidation(a.value.length,
b.length.min,b.length.max)).validate()});this.defineValidation("wordCount",function(a,b){var c;c=""===a.value?c=0:a.value.split(/[ ]+/).length;return(new WordCountValidation(c,b.wordCount.min,b.wordCount.max)).validate()});this.defineValidation("allowEmpty",function(c,b){return a.alwaysNoneIf(""===c.value)});this.defineValidation("onlyIfChecked",function(c,b){return a.alwaysNoneIf(!document.getElementById(b.onlyIfChecked).checked)});this.defineValidation("onlyIfEmpty",function(c,b){if(!(new InputWithValidations(document.getElementById(b.onlyIfEmpty))).isEmpty())return a.alwaysNone()});
return this.defineValidation("group",function(a,c){})};return e}()}).call(this);
(function(a,c,e,d){function b(c,b){this.element=c;this.options=a.extend({},h,b);this._defaults=h;this._name=f;this.init()}var f="validate",h={validator:new FormValidator,onBlur:!1,selectorClasses:{field:".field"},errorClasses:{input:"input-with-error",field:"field-with-error",form:"form-with-error"},beforeValidation:function(){},afterValidation:function(){},ifValid:function(){},ifInvalid:function(){}};b.prototype={init:function(){var c=this,b=c.element,d=c.options,f=d.validator,k=!0;b.setAttribute("novalidate",
"true");a(e).on("keydown",function(c){var b;b=13===c.keyCode?!0:void 0;b&&(c=c.target.nodeName.toLowerCase(),b="input"==c||"textarea"==c||"select"==c?!0:!1);b&&a('input[type="submit"]:not([data-skip-validation])').trigger("click")});a("input[data-skip-validation]").hover(function(){k=!1},function(){k=!0}).on("click",function(a){k&&a.preventDefault()});a(b).on("submit",function(e){k&&(d.beforeValidation(),f.validateForm(b)?d.ifValid():(e.preventDefault(),d.ifInvalid()),c.setErrorClasses(b,d),c.setErrorMessages(b,
d),a(".input-with-error").first().focus(),d.afterValidation())});if(d.onBlur)a(b).find("[data-validation]").on("blur",function(a){f.validateInput(this);c.setErrorClasses(b,d);c.setErrorMessages(b,d)})},setErrorClasses:function(c,b){a("."+b.errorClasses.input).removeClass(b.errorClasses.input);a("."+b.errorClasses.field).removeClass(b.errorClasses.field);a("."+b.errorClasses.form).removeClass(b.errorClasses.form);a(c).find("[data-error-message]").each(function(){var d=a(this),e=d.parents(b.selectorClasses.field),
f=a(c);d.addClass(b.errorClasses.input);e.addClass(b.errorClasses.field);f.addClass(b.errorClasses.form)})},setErrorMessages:function(b,c){a(b).find("small.error-message").remove();a(b).find("[data-error-message]").each(function(){var b=this.dataset.errorMessage;a(this).after('<small class="error-message">'+b+"</small>")})}};a.fn[f]=function(c){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new b(this,c))})}})(jQuery,window,document);
